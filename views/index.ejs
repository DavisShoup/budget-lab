<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Index</title>
</head>
<body>
    <div class="container">
    <h1>Budgtr</h1>
    <button><a href="/budgets/new" style="text-decoration: none;">NEW ITEM</a></button>
    <% let bankAccount = 0 %>
    <% let changeColor = null%>
    <% budget.map((element) => { %>
    <% dollar = parseInt(element.amount) %>
    <% bankAccount = bankAccount + dollar; %>
    <% if(bankAccount < 0){ changeColor = "red";}else if(bankAccount > 1000){ changeColor = "green"}%>
    <% }); %>
    <style> body { background-color: <%= changeColor %>}</style>
    <h2>Bank Account Total: <%= bankAccount %></h2>
        <table>
        <% for (let i = 0; i < budget.length; i++) { %>
                <tr>
                    <td><%= budget[i].date %></td>
                    <td><a href="/budgets/<%= i %>">
                    <%= budget[i].name %>
                    </a></td>
                    <td> <%= budget[i].amount %></td>
                </tr>
        <% } %>
        </table>
    </div>
</body>
</html>